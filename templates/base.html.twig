<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        {% block stylesheets %}
        {% endblock %}

        {# TinyMCE (CDN) + initialisation globale #}
        <script src="https://cdn.tiny.cloud/1/{{ tinymce_api_key }}/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
        <script>
            window.initTinyMCE = function() {
                if (!window.tinymce) { return; }
                try { tinymce.remove(); } catch (e) {}
                tinymce.init({
                    selector: 'textarea.tinymce',
                    menubar: false,
                    branding: false,
                    height: 220,
                    plugins: 'lists link code autosave',
                    toolbar: 'undo redo | blocks | bold italic underline | bullist numlist | link | removeformat | code',
                    entity_encoding: 'raw',
                    convert_urls: false,
                    skin: 'oxide-dark',
                    content_css: 'dark'
                });
            };
            document.addEventListener('DOMContentLoaded', function(){
                if (document.querySelector('textarea.tinymce')) {
                    window.initTinyMCE();
                }
            });
        </script>

        {% block javascripts %}
        {% endblock %}
    </head>
    <body>
        {% block body %}{% endblock %}
    </body>
</html>
